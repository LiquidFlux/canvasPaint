!function(a){var b={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:""},c=a(window),d=a(document),e=[],f=c.height(),g=function(){for(var b=c.scrollTop(),g=d.height(),h=g-f,i=b>h?h-b:0,j=0;j<e.length;j++){var k=e[j],l=k.stickyWrapper.offset().top,m=l-k.topSpacing-i;if(m>=b)null!==k.currentTop&&(k.stickyElement.css("position","").css("top",""),k.stickyElement.parent().removeClass(k.className),k.currentTop=null);else{var n=g-k.stickyElement.outerHeight()-k.topSpacing-k.bottomSpacing-b-i;0>n?n+=k.topSpacing:n=k.topSpacing,k.currentTop!=n&&(k.stickyElement.css("position","fixed").css("top",n),"undefined"!=typeof k.getWidthFrom&&k.stickyElement.css("width",a(k.getWidthFrom).width()),k.stickyElement.parent().addClass(k.className),k.currentTop=n)}}},h=function(){f=c.height()},i={init:function(c){var d=a.extend(b,c);return this.each(function(){var b=a(this),c=b.attr("id"),f=a("<div></div>").attr("id",c+"-sticky-wrapper").addClass(d.wrapperClassName);b.wrapAll(f),d.center&&b.parent().css({width:b.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"==b.css("float")&&b.css({"float":"none"}).parent().css({"float":"right"});var g=b.parent();g.css("height",b.outerHeight()),e.push({topSpacing:d.topSpacing,bottomSpacing:d.bottomSpacing,stickyElement:b,currentTop:null,stickyWrapper:g,className:d.className,getWidthFrom:d.getWidthFrom})})},update:g,unstick:function(){return this.each(function(){var b=a(this);removeIdx=-1;for(var c=0;c<e.length;c++)e[c].stickyElement.get(0)==b.get(0)&&(removeIdx=c);-1!=removeIdx&&(e.splice(removeIdx,1),b.unwrap(),b.removeAttr("style"))})}};window.addEventListener?(window.addEventListener("scroll",g,!1),window.addEventListener("resize",h,!1)):window.attachEvent&&(window.attachEvent("onscroll",g),window.attachEvent("onresize",h)),a.fn.sticky=function(b){return i[b]?i[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.sticky"):i.init.apply(this,arguments)},a.fn.unstick=function(b){return i[b]?i[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.sticky"):i.unstick.apply(this,arguments)},a(function(){setTimeout(g,0)})}(jQuery),$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top},1e3),!1}}),$.fn.paint=function(a){function b(a,b){var c={x:0,y:0};return-1!==b.type.indexOf("touch")?(c.x=b.originalEvent.touches[0].pageX,c.y=b.originalEvent.touches[0].pageY):(c.x=b.pageX,c.y=b.pageY),{x:(c.x-$(a).offset().left)/$(a).width(),y:(c.y-$(a).offset().top)/$(a).height()}}function c(a,b){l*=a/f.width(),console.log(l),f.width(a),f.height(b),f[0].setAttribute("width",a),f[0].setAttribute("height",b)}function d(){var a=$(f).width(),b=$(f).height();g.clearRect(0,0,a,b);for(var c=0;c<i.length;c++){var d=i[c].stroke;g.beginPath();for(var e=0;e<d.length-1;e++)g.moveTo(d[e].x*a,d[e].y*b),g.lineTo(d[e+1].x*a,d[e+1].y*b);g.closePath(),g.strokeStyle=i[c].color,g.lineWidth=i[c].size*a,g.lineJoin=i[c].join,g.lineCap=i[c].cap,g.miterLimit=i[c].miterLimit,g.stroke()}}function e(){a.data?(h="undefined"!=typeof a.data.aspectRatio?a.data.aspectRatio:h,i="undefined"!=typeof a.data.strokes?a.data.strokes:[]):h="undefined"!=typeof a.aspectRatio?a.aspectRatio:h;var b="undefined"!=typeof a.canvasColor?a.canvasColor:"#fff";f.css("background-color",b);var e="undefined"!=typeof a.locked?a.locked:!1;e?f.unbind(r+s+t):f.css("cursor","crosshair");var g=f.parent().width(),j=g/h;c(g,j),d()}var f=this,g=$(this)[0].getContext("2d"),h=1,i=[],j=!1,k="#000",l=20,m="round",n="round",o=10,p="brush",q=[];f.parent().resize(function(){var a=f.parent().width(),b=a/h;c(a,b),d()});var r="mousedown touchstart ";f.on(r,function(a){"touchstart"==a.type?a.preventDefault():a.originalEvent.preventDefault(),j=!0,q=[],i.push({stroke:[],color:k,size:l/$(this).width(),cap:m,join:n,miterLimit:o});var c=b(this,a);i[i.length-1].stroke.push({x:c.x,y:c.y}),d()});var s="mousemove touchmove ";f.on(s,function(a){var c=b(this,a);j&&(i[i.length-1].stroke.push({x:c.x,y:c.y}),d())});var t="mouseup mouseleave touchend ";return f.on(t,function(){j=!1}),e(),this.json=function(){return JSON.stringify({aspectRatio:h,strokes:i})},this.jsonLoad=function(a){var b=JSON.parse(a);h=b.aspectRatio,i=b.strokes,d()},this.getImage=function(){return'<img src="'+f[0].toDataURL("image/png")+'"/>'},this.getLineColor=function(){return k},this.setLineColor=function(a){k=a},this.getLineSize=function(){return l},this.setLineSize=function(a){l=a},this.setBrush=function(a){p=a},this.getBrush=function(){return p},this.undo=function(){i.length>0&&(q.push(i.pop()),d())},this.redo=function(){q.length>0&&(i.push(q.pop()),d())},this.clear=function(){i=[],d()},this.redraw=function(){d()},this},$("#navDesktop .brush").on("click",function(){$(this).parent(1).hasClass("current")||($("#navDesktop .current").removeClass("current"),$(this).parent(1).addClass("current"),paint.setBrush($(this).data("brush-type")))}),$("#canvasButtonRestart").on("click",function(){paint.clear()}),$("#colorPicker").on("change",function(){paint.setLineColor($(this).val())}),$("#lineSizePicker").on("change",function(){paint.setLineSize($(this).val())}),paint=$("#mainCanvas").paint({aspectRatio:2})});var paint;